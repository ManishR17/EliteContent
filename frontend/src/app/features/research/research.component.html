<div class="research-container">
    <div class="header">
        <h1>Research <span class="gradient-text">Paper</span></h1>
        <p>Generate academic papers with proper citations and sources</p>
    </div>

    <div class="content-grid">
        <div class="input-panel">
            <div class="form-group">
                <label>Research Topic</label>
                <input type="text" [(ngModel)]="topic" placeholder="e.g., Impact of AI on Healthcare">
            </div>

            <div class="form-group">
                <label>Research Question</label>
                <textarea [(ngModel)]="researchQuestion" rows="3"
                    placeholder="e.g., How does artificial intelligence improve diagnostic accuracy in modern medicine?"></textarea>
            </div>

            <div class="form-group">
                <label>Citation Style</label>
                <select [(ngModel)]="citationStyle">
                    <option *ngFor="let style of citationStyles" [value]="style.value">{{ style.label }}</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Target Length</label>
                    <select [(ngModel)]="length">
                        <option *ngFor="let opt of lengthOptions" [value]="opt.value">{{ opt.label }}</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Number of Sources</label>
                    <input type="number" [(ngModel)]="sourcesCount" min="5" max="50">
                </div>
            </div>

            <button (click)="generateResearch()" [disabled]="!topic || !researchQuestion || isLoading"
                class="generate-btn">
                {{ isLoading ? 'Researching & Writing...' : 'Generate Paper' }}
            </button>

            <div *ngIf="error" class="error">{{ error }}</div>
        </div>

        <div class="results-panel">
            <div *ngIf="!result" class="empty-state">
                <div class="empty-icon">ðŸŽ“</div>
                <h3>Your Research Paper</h3>
                <p class="empty-message">Enter your research topic and question to generate an academic paper with
                    proper citations. It will appear here.</p>
            </div>

            <div *ngIf="result">
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="value">{{ result.word_count }}</span>
                        <span class="label">Words</span>
                    </div>
                    <div class="stat-card">
                        <span class="value">{{ result.citations_count }}</span>
                        <span class="label">Citations</span>
                    </div>
                    <div class="stat-card">
                        <span class="value">{{ result.sources.length }}</span>
                        <span class="label">Sources</span>
                    </div>
                    <div class="stat-card">
                        <span class="value">{{ result.quality_score }}/100</span>
                        <span class="label">Quality</span>
                    </div>
                </div>

                <div class="preview-section">
                    <h3>Paper Preview</h3>
                    <div class="paper-content">
                        <div *ngFor="let section of result.sections" class="section">
                            <h4>{{ section.title }}</h4>
                            <p>{{ section.content }}</p>
                        </div>

                        <div class="references">
                            <h4>References</h4>
                            <ul>
                                <li *ngFor="let source of result.sources">{{ source }}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
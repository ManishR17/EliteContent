<div class="resume-container">
    <div class="header">
        <h1>AI ATS <span class="gradient-text">Resume Writer</span></h1>
        <p>Generate tailored, ATS-friendly resumes optimized for your target job</p>
    </div>

    <div class="content-grid">
        <!-- Input Panel -->
        <div class="input-panel">
            <!-- REQUIRED FIELDS -->
            <div class="form-section">
                <h3><span class="step-number">1</span> Job Details</h3>

                <div class="form-group">
                    <label class="form-label">Job Description *</label>
                    <textarea [(ngModel)]="jobDescription" placeholder="Paste the complete job description here..."
                        rows="6" class="form-textarea"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Target Job Title *</label>
                    <input type="text" [(ngModel)]="targetJobTitle" placeholder="e.g., Senior Software Engineer"
                        class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label">Years of Experience *</label>
                    <input type="number" [(ngModel)]="yearsOfExperience" min="0" max="50" class="form-input">
                </div>
            </div>

            <div class="form-section">
                <h3><span class="step-number">2</span> Skills</h3>
                <div class="form-group">
                    <label class="form-label">Core Skills * (One per line or comma-separated)</label>
                    <textarea [(ngModel)]="skillsInput" rows="4" class="form-textarea" placeholder="Python, JavaScript, React
Project Management
Data Analysis"></textarea>
                </div>
            </div>

            <!-- OPTIONAL FIELDS -->
            <div class="form-section">
                <details>
                    <summary>Optional Settings & Preferences</summary>

                    <div class="form-group mt-4">
                        <label class="form-label">Industry</label>
                        <select [(ngModel)]="industry" class="form-select">
                            <option value="">Select Industry</option>
                            <option *ngFor="let ind of industries" [value]="ind">{{ ind }}</option>
                        </select>
                    </div>

                    <div class="grid-2col">
                        <div class="form-group">
                            <label class="form-label">Tone Style</label>
                            <select [(ngModel)]="toneStyle" class="form-select">
                                <option *ngFor="let tone of toneStyles" [value]="tone">{{ tone }}</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Career Level</label>
                            <select [(ngModel)]="careerLevel" class="form-select">
                                <option *ngFor="let level of careerLevels" [value]="level">{{ level }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Key Achievements (One per line or comma-separated)</label>
                        <textarea [(ngModel)]="achievementsInput" rows="3" class="form-textarea" placeholder="Increased sales by 40%
Led team of 15 engineers
Launched 3 successful products"></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Work Authorization</label>
                        <input type="text" [(ngModel)]="workAuthorization" placeholder="e.g., US Citizen, H1B"
                            class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Additional Context</label>
                        <textarea [(ngModel)]="additionalContext" rows="3" placeholder="Any other details..."
                            class="form-textarea"></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Format Style</label>
                        <select [(ngModel)]="formatType" class="form-select">
                            <option *ngFor="let format of formatOptions" [value]="format">{{ format }}</option>
                        </select>
                    </div>
                </details>
            </div>

            <button (click)="generateResume()"
                [disabled]="!jobDescription || !targetJobTitle || coreSkills.length === 0 || isLoading"
                class="generate-btn">
                <span *ngIf="!isLoading">üöÄ Generate Tailored Resume</span>
                <span *ngIf="isLoading" class="loading-spinner">‚è≥ Generating...</span>
            </button>

            <div *ngIf="error" class="error-message">
                <span class="error-icon">‚ö†Ô∏è</span>
                {{ error }}
            </div>
        </div>

        <!-- Results Panel -->
        <div class="results-panel">
            <div *ngIf="!result" class="empty-state">
                <div class="empty-icon">‚ú®</div>
                <h3>Your Tailored Resume</h3>
                <p class="empty-message">
                    Fill in the form on the left to generate your ATS-optimized resume.
                    Our AI will analyze the job description and tailor your resume accordingly.
                </p>
                <div class="features-list">
                    <div class="feature-item">‚úì ATS-Optimized Keywords</div>
                    <div class="feature-item">‚úì Skills Matching Analysis</div>
                    <div class="feature-item">‚úì Professional Formatting</div>
                    <div class="feature-item">‚úì Instant Download</div>
                </div>
            </div>

            <div *ngIf="result" class="results-content">
                <!-- ATS Score -->
                <div class="score-section">
                    <div class="score-card">
                        <div class="score-circle" [class.high-score]="result.ats_score >= 70"
                            [class.medium-score]="result.ats_score >= 50 && result.ats_score < 70"
                            [class.low-score]="result.ats_score < 50">
                            <span class="score-value">{{ result.ats_score }}</span>
                            <span class="score-label">ATS Score</span>
                        </div>
                        <div class="score-info">
                            <h4>ATS Compatibility</h4>
                            <p>Your resume has a {{ result.ats_score }}% match with the job description</p>
                        </div>
                    </div>
                </div>

                <!-- Skills Analysis -->
                <div class="analysis-section">
                    <h4>‚úÖ Matched Skills ({{ result.matched_skills.length }})</h4>
                    <div class="skills-tags">
                        <span *ngFor="let skill of result.matched_skills" class="skill-tag matched">
                            {{ skill }}
                        </span>
                    </div>
                    <p class="hint-text" *ngIf="result.matched_skills.length === 0">
                        No matched skills found. Consider adding more relevant skills.
                    </p>
                </div>

                <div class="analysis-section" *ngIf="result.missing_skills.length > 0">
                    <h4>‚ö†Ô∏è Missing Skills ({{ result.missing_skills.length }})</h4>
                    <div class="skills-tags">
                        <span *ngFor="let skill of result.missing_skills.slice(0, 10)" class="skill-tag missing">
                            {{ skill }}
                        </span>
                    </div>
                    <p class="hint-text">Consider adding these skills if you have experience with them.</p>
                </div>

                <!-- Suggestions -->
                <div class="suggestions-section" *ngIf="result.suggestions && result.suggestions.length > 0">
                    <h4>üí° Improvement Suggestions</h4>
                    <ul class="suggestions-list">
                        <li *ngFor="let suggestion of result.suggestions">{{ suggestion }}</li>
                    </ul>
                </div>

                <!-- Generated Resume -->
                <div class="resume-preview-section">
                    <div class="preview-header">
                        <h4>üìÑ Your Tailored Resume</h4>
                        <button (click)="downloadResume()" class="download-btn">
                            ‚¨áÔ∏è Download
                        </button>
                    </div>
                    <div class="resume-content">
                        <pre>{{ result.tailored_resume }}</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
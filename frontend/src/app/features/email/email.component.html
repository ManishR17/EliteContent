<div class="email-container">
    <div class="header">
        <h1>Email <span class="gradient-text">Writer</span></h1>
        <p>Draft professional, effective emails in seconds</p>
    </div>

    <div class="content-grid">
        <!-- Input Panel -->
        <div class="input-panel">
            <!-- REQUIRED FIELDS -->
            <div class="form-section">
                <h3><span class="step-number">1</span> Email Context</h3>

                <div class="form-group">
                    <label class="form-label">Email Purpose *</label>
                    <input type="text" [(ngModel)]="emailPurpose" placeholder="e.g., Follow up on interview"
                        class="form-input">
                </div>

                <div class="form-group">
                    <label class="form-label">Recipient Type *</label>
                    <select [(ngModel)]="recipientType" class="form-select">
                        <option value="">Select Recipient Type</option>
                        <option *ngFor="let type of recipientTypes" [value]="type.value">{{ type.label }}</option>
                    </select>
                </div>
            </div>

            <div class="form-section">
                <h3><span class="step-number">2</span> Key Details</h3>
                <div class="form-group">
                    <label class="form-label">Key Points * (One per line or comma-separated)</label>
                    <textarea [(ngModel)]="keyPointsInput" rows="4" class="form-textarea" placeholder="- Thank them for their time
- Reiterate interest in the role
- Ask about next steps"></textarea>
                </div>
            </div>

            <!-- OPTIONAL FIELDS -->
            <div class="form-section">
                <details>
                    <summary>Optional Settings & Preferences</summary>

                    <div class="grid-2col mt-4">
                        <div class="form-group">
                            <label class="form-label">Tone Style</label>
                            <select [(ngModel)]="toneStyle" class="form-select">
                                <option *ngFor="let tone of toneStyles" [value]="tone">{{ tone }}</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Urgency Level</label>
                            <select [(ngModel)]="urgencyLevel" class="form-select">
                                <option *ngFor="let level of urgencyLevels" [value]="level">{{ level }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Call to Action</label>
                        <input type="text" [(ngModel)]="callToAction" placeholder="e.g., Schedule a meeting"
                            class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Signature Details</label>
                        <input type="text" [(ngModel)]="signatureDetails" placeholder="e.g., Name, Title, Phone"
                            class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Subject Line Preference</label>
                        <input type="text" [(ngModel)]="subjectLinePreference" placeholder="e.g., Catchy and short"
                            class="form-input">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Additional Context</label>
                        <textarea [(ngModel)]="context" rows="3" placeholder="Any other details..."
                            class="form-textarea"></textarea>
                    </div>
                </details>
            </div>

            <button (click)="generateEmail()"
                [disabled]="!emailPurpose || !recipientType || !keyPointsInput.trim() || isLoading"
                class="generate-btn">
                <span *ngIf="!isLoading">üöÄ Generate Email</span>
                <span *ngIf="isLoading" class="loading-spinner">‚è≥ Generating...</span>
            </button>

            <div *ngIf="error" class="error-message">
                <span class="error-icon">‚ö†Ô∏è</span>
                {{ error }}
            </div>
        </div>

        <!-- Results Panel -->
        <div class="results-panel">
            <div *ngIf="!result" class="empty-state">
                <div class="empty-icon">üìß</div>
                <h3>Your Draft Email</h3>
                <p class="empty-message">
                    Provide the context and key points.
                    We'll craft a perfectly toned email for you.
                </p>
            </div>

            <div *ngIf="result" class="results-content">
                <div class="info-card">
                    <div class="info-item">
                        <span class="label">Spam Score</span>
                        <span class="value" [style.color]="result.spam_score < 30 ? '#22c55e' : '#ef4444'">
                            {{ result.spam_score }}/100
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="label">Tone</span>
                        <span class="value">{{ result.tone_detected }}</span>
                    </div>
                </div>

                <div class="subject-preview">
                    <h3>Subject Line</h3>
                    <div class="subject-box">{{ result.subject }}</div>
                </div>

                <div class="email-content">
                    <h3>Email Body</h3>
                    <div class="email-preview">{{ result.body }}</div>
                </div>

                <div class="action-buttons">
                    <button class="copy-btn" (click)="copyToClipboard()">
                        üìã Copy to Clipboard
                    </button>
                    <button class="reset-btn" (click)="result = null">
                        üîÑ Start Over
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>